<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vocabolario Cinese</title>
    <style>
        body {
            box-sizing: border-box;
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 50%, #fecfef 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }
        
        .header h1 {
            font-size: 2.5em;
            margin: 0;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .controls {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }
        
        .search-section {
            background: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }
        
        .search-box {
            width: 100%;
            padding: 15px;
            border: 2px solid #ff9a9e;
            border-radius: 10px;
            font-size: 16px;
            box-sizing: border-box;
        }
        
        .search-box:focus {
            border-color: #ff6b9d;
            outline: none;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #333;
        }
        
        .form-group input,
        .form-group textarea {
            width: 100%;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 14px;
            box-sizing: border-box;
        }
        
        .form-group input:focus,
        .form-group textarea:focus {
            border-color: #ff9a9e;
            outline: none;
        }
        
        .chinese-input {
            font-size: 18px;
            font-family: 'Microsoft YaHei', 'SimSun', sans-serif;
        }
        
        .form-row {
            display: flex;
            gap: 20px;
        }
        
        .form-row .form-group {
            flex: 1;
        }
        
        .btn {
            background: #ff9a9e;
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            margin-right: 10px;
            transition: background 0.3s;
        }
        
        .btn:hover {
            background: #ff6b9d;
        }
        
        .btn-danger {
            background: #e74c3c;
        }
        
        .btn-danger:hover {
            background: #c0392b;
        }
        
        .vocab-area {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }
        
        .vocab-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .vocab-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            transition: transform 0.3s, box-shadow 0.3s;
        }
        
        .vocab-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }
        
        .chinese-char {
            font-size: 2.5em;
            font-family: 'Microsoft YaHei', 'SimSun', sans-serif;
            text-align: center;
            margin-bottom: 10px;
            font-weight: bold;
        }
        
        .pinyin {
            font-size: 1.1em;
            text-align: center;
            margin-bottom: 15px;
            opacity: 0.9;
            font-style: italic;
        }
        
        .translation {
            font-size: 1.2em;
            font-weight: bold;
            text-align: center;
            margin-bottom: 15px;
        }
        
        .examples {
            font-size: 0.9em;
            opacity: 0.9;
            line-height: 1.4;
            border-top: 1px solid rgba(255,255,255,0.3);
            padding-top: 15px;
        }
        
        .example-item {
            margin-bottom: 8px;
        }
        
        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: #666;
        }
        
        .empty-state .emoji {
            font-size: 4em;
            margin-bottom: 20px;
        }
        
        .code-area {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
        }
        
        .code-display {
            background: #2d3748;
            color: #68d391;
            padding: 20px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 13px;
            white-space: pre-wrap;
            overflow-x: auto;
            max-height: 400px;
            overflow-y: auto;
        }
        
        .stats {
            background: rgba(255,255,255,0.2);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            color: white;
            margin-bottom: 20px;
        }
        
        .stats-number {
            font-size: 2em;
            font-weight: bold;
        }
        
        .no-results {
            text-align: center;
            padding: 40px;
            color: #666;
        }
    </style>
</head>
<body>
  
    <div class="container">
        <div class="header">
            <h1>üá®üá≥ Vocabolario Cinese</h1>
            <p>Il tuo dizionario personale cinese-italiano</p>
            
          <div class="stats">
                <div class="stats-number" id="totalWords">0</div>
                <div>parole nel vocabolario</div>
            </div>
        </div>
        
        <div class="search-section">
            <h2>üîç Cerca nel vocabolario</h2>
            <input type="text" id="searchInput" class="search-box" placeholder="Cerca per caratteri cinesi, pinyin o traduzione italiana...">
        </div>
        
        <div class="controls">
            <h2>‚ûï Aggiungi nuova parola</h2>
            
            <div class="form-row">
                <div class="form-group">
                    <label for="chinese">Caratteri cinesi</label>
                    <input type="text" id="chinese" class="chinese-input" placeholder="‰Ω†Â•Ω">
                </div>
                <div class="form-group">
                    <label for="pinyin">Pinyin</label>
                    <input type="text" id="pinyin" placeholder="n«ê h«éo">
                </div>
            </div>
            
            <div class="form-group">
                <label for="translation">Traduzione italiana</label>
                <input type="text" id="translation" placeholder="ciao, salve">
            </div>
            
            <div class="form-group">
                <label for="examples">Esempi d'uso (uno per riga)</label>
                <textarea id="examples" rows="3" placeholder="‰Ω†Â•ΩÔºåÊàëÊòØÈ©¨ÂèØ„ÄÇ- Ciao, sono Marco.
‰Ω†Â•ΩÂêóÔºü- Come stai?"></textarea>
            </div>
            
            <button class="btn" onclick="aggiungiParola()">‚ûï Aggiungi Parola</button>
            <button class="btn btn-danger" onclick="cancellaTutto()">üóëÔ∏è Cancella Tutto</button>
        </div>
        
        <div class="vocab-area">
            <h2>üìö Il tuo vocabolario</h2>
            <div id="vocabContainer" class="vocab-grid"></div>
            <div id="emptyMessage" class="empty-state">
                <div class="emoji">üìñ</div>
                <h3>Nessuna parola nel vocabolario</h3>
                <p>Aggiungi la tua prima parola cinese usando il modulo sopra!</p>
            </div>
            <div id="noResults" class="no-results" style="display: none;">
                <div style="font-size: 3em; margin-bottom: 15px;">üîç</div>
                <h3>Nessun risultato trovato</h3>
                <p>Prova con altri termini di ricerca</p>
            </div>
        </div>
        
        <div class="code-area">
            <h2>üíª Codice HTML</h2>
            <div id="codeDisplay" class="code-display" style="display: none;"></div>
            <div id="noCode" style="text-align: center; padding: 40px; color: #666;">
                <div style="font-size: 3em; margin-bottom: 15px;">üíª</div>
                <p>Il codice HTML del vocabolario apparir√† qui</p>
            </div>
<div id="codeDisplay" class="code-display" style="display: none;"></div>
<button class="btn" onclick="copiaCodice()">Copia</button>
        </div>

    </div>
      <button class="inline-flex items-center justify-center rounded-md px-4 py-2 text-base text-white font-semibold shadow-md hover:shadow-lg transform hover:-translate-y-0.5 transition-all duration-200 bg-gradient-to-r from-red-500 to-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 active:transform active:scale-95" onclick="window.history.back()">
  <span class="mr-2"> <svg class="w-6 h-6" fill="none" stroke="#EF4444" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path>
</svg> </span>home
</button>  
    
    <script>
        var contatore = 0;
var vocabolario = [];
var vocabolarioSalvato = localStorage.getItem('vocabolario');
if (vocabolarioSalvato) {
  vocabolario = JSON.parse(vocabolarioSalvato);
  contatore = vocabolario.length > 0 ? vocabolario[vocabolario.length - 1].id + 1 : 0;
}
var vocabolarioFiltrato = vocabolario.slice();
        
        function aggiungiParola() {
            var chinese = document.getElementById('chinese').value.trim();
            var pinyin = document.getElementById('pinyin').value.trim();
            var translation = document.getElementById('translation').value.trim();
            var examples = document.getElementById('examples').value.trim();
            
            if (!chinese || !translation) {
                return;
            }
            
            contatore++;
            
            var nuovaParola = {
                id: contatore,
                chinese: chinese,
                pinyin: pinyin,
                translation: translation,
                examples: examples
            };
            
            vocabolario.push(nuovaParola);
            vocabolarioFiltrato = vocabolario.slice();
            
            // Pulisci i campi
            document.getElementById('chinese').value = '';
            document.getElementById('pinyin').value = '';
            document.getElementById('translation').value = '';
            document.getElementById('examples').value = '';
            
            aggiornaVisualizzazione();
            aggiornaStats();
        }
localStorage.setItem('vocabolario', JSON.stringify(vocabolario));
        
        function aggiornaVisualizzazione() {
            var container = document.getElementById('vocabContainer');
            var emptyMessage = document.getElementById('emptyMessage');
            var noResults = document.getElementById('noResults');
            
            container.innerHTML = '';
            
            if (vocabolario.length === 0) {
                emptyMessage.style.display = 'block';
                noResults.style.display = 'none';
                nascondiCodice();
                return;
            }
            
            if (vocabolarioFiltrato.length === 0) {
                emptyMessage.style.display = 'none';
                noResults.style.display = 'block';
                return;
            }
            
            emptyMessage.style.display = 'none';
            noResults.style.display = 'none';
            
            for (var i = 0; i < vocabolarioFiltrato.length; i++) {
                var parola = vocabolarioFiltrato[i];
                var cardElement = document.createElement('div');
                cardElement.className = 'vocab-card';
                
                var chineseDiv = document.createElement('div');
                chineseDiv.className = 'chinese-char';
                chineseDiv.textContent = parola.chinese;
                
                var pinyinDiv = document.createElement('div');
                pinyinDiv.className = 'pinyin';
                pinyinDiv.textContent = parola.pinyin;
                
                var translationDiv = document.createElement('div');
                translationDiv.className = 'translation';
                translationDiv.textContent = parola.translation;
                
                cardElement.appendChild(chineseDiv);
                if (parola.pinyin) {
                    cardElement.appendChild(pinyinDiv);
                }
                cardElement.appendChild(translationDiv);
                
                if (parola.examples) {
                    var examplesDiv = document.createElement('div');
                    examplesDiv.className = 'examples';
                    
                    var exampleLines = parola.examples.split('\n');
                    for (var j = 0; j < exampleLines.length; j++) {
                        if (exampleLines[j].trim()) {
                            var exampleItem = document.createElement('div');
                            exampleItem.className = 'example-item';
                            exampleItem.textContent = exampleLines[j].trim();
                            examplesDiv.appendChild(exampleItem);
                        }
                    }
                    
                    cardElement.appendChild(examplesDiv);
                }
                
                container.appendChild(cardElement);
            }
            
            generaCodice();
        }
        
        function cercaParole() {
            var termineRicerca = document.getElementById('searchInput').value.toLowerCase().trim();
            
            if (!termineRicerca) {
                vocabolarioFiltrato = vocabolario.slice();
            } else {
                vocabolarioFiltrato = vocabolario.filter(function(parola) {
                    return parola.chinese.toLowerCase().includes(termineRicerca) ||
                           parola.pinyin.toLowerCase().includes(termineRicerca) ||
                           parola.translation.toLowerCase().includes(termineRicerca) ||
                           parola.examples.toLowerCase().includes(termineRicerca);
                });
            }
            
            aggiornaVisualizzazione();
        }
        
        function cancellaTutto() {
            vocabolario = [];
            vocabolarioFiltrato = [];
            contatore = 0;
            document.getElementById('searchInput').value = '';
            aggiornaVisualizzazione();
            aggiornaStats();
        }
        localStorage.setItem('vocabolario', JSON.stringify(vocabolario));
        function aggiornaStats() {
            document.getElementById('totalWords').textContent = vocabolario.length;
        }
        
        function generaCodice() {
            var codice = '<!DOCTYPE html>\n<html lang="it">\n<head>\n    <meta charset="UTF-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0">\n    <title>Vocabolario Cinese</title>\n    <style>\n';
            codice += '        body { box-sizing: border-box; font-family: Arial, sans-serif; margin: 0; padding: 20px; background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 50%, #fecfef 100%); min-height: 100vh; }\n';
            codice += '        .container { max-width: 1200px; margin: 0 auto; }\n';
            codice += '        .search-section { background: white; padding: 20px; border-radius: 15px; box-shadow: 0 8px 32px rgba(0,0,0,0.1); margin-bottom: 30px; }\n';
            codice += '        .search-box { width: 100%; padding: 15px; border: 2px solid #ff9a9e; border-radius: 10px; font-size: 16px; box-sizing: border-box; }\n';
            codice += '        .search-box:focus { border-color: #ff6b9d; outline: none; }\n';
            codice += '        .vocab-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 20px; margin-top: 20px; }\n';
            codice += '        .vocab-card { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 20px; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); transition: transform 0.3s, box-shadow 0.3s; }\n';
            codice += '        .vocab-card:hover { transform: translateY(-5px); box-shadow: 0 8px 25px rgba(0,0,0,0.15); }\n';
            codice += '        .chinese-char { font-size: 2.5em; font-family: "Microsoft YaHei", "SimSun", sans-serif; text-align: center; margin-bottom: 10px; font-weight: bold; }\n';
            codice += '        .pinyin { font-size: 1.1em; text-align: center; margin-bottom: 15px; opacity: 0.9; font-style: italic; }\n';
            codice += '        .translation { font-size: 1.2em; font-weight: bold; text-align: center; margin-bottom: 15px; }\n';
            codice += '        .examples { font-size: 0.9em; opacity: 0.9; line-height: 1.4; border-top: 1px solid rgba(255,255,255,0.3); padding-top: 15px; }\n';
            codice += '        .example-item { margin-bottom: 8px; }\n';
            codice += '    </style>\n</head>\n<body>\n    <div class="container">\n\n';
            
            codice += '<!-- Barra di ricerca -->\n';
            codice += '<div class="search-section">\n';
            codice += '    <h2>üîç Cerca nel vocabolario</h2>\n';
            codice += '    <input type="text" id="searchInput" class="search-box" placeholder="Cerca per caratteri cinesi, pinyin o traduzione italiana..." oninput="cercaParole()">\n';
            codice += '</div>\n\n';
            
            codice += '<!-- Container vocabolario -->\n';
            codice += '<div id="vocabContainer" class="vocab-grid">\n';
            
            for (var i = 0; i < vocabolario.length; i++) {
                var parola = vocabolario[i];
                codice += '    <div class="vocab-card" data-chinese="' + parola.chinese.toLowerCase() + '" data-pinyin="' + parola.pinyin.toLowerCase() + '" data-translation="' + parola.translation.toLowerCase() + '" data-examples="' + parola.examples.toLowerCase() + '">\n';
                codice += '        <div class="chinese-char">' + parola.chinese + '</div>\n';
                if (parola.pinyin) {
                    codice += '        <div class="pinyin">' + parola.pinyin + '</div>\n';
                }
                codice += '        <div class="translation">' + parola.translation + '</div>\n';
                
                if (parola.examples) {
                    codice += '        <div class="examples">\n';
                    var exampleLines = parola.examples.split('\n');
                    for (var j = 0; j < exampleLines.length; j++) {
                        if (exampleLines[j].trim()) {
                            codice += '            <div class="example-item">' + exampleLines[j].trim() + '</div>\n';
                        }
                    }
                    codice += '        </div>\n';
                }
                
                codice += '    </div>\n';
            }
            
            codice += '</div>\n\n';
            
            codice += '<!-- JavaScript per la ricerca -->\n';
            codice += '<script>\n';
            codice += 'function cercaParole() {\n';
            codice += '    var termineRicerca = document.getElementById("searchInput").value.toLowerCase().trim();\n';
            codice += '    var cards = document.querySelectorAll(".vocab-card");\n';
            codice += '    \n';
            codice += '    for (var i = 0; i < cards.length; i++) {\n';
            codice += '        var card = cards[i];\n';
            codice += '        var chinese = card.getAttribute("data-chinese");\n';
            codice += '        var pinyin = card.getAttribute("data-pinyin");\n';
            codice += '        var translation = card.getAttribute("data-translation");\n';
            codice += '        var examples = card.getAttribute("data-examples");\n';
            codice += '        \n';
            codice += '        if (!termineRicerca || chinese.includes(termineRicerca) || pinyin.includes(termineRicerca) || translation.includes(termineRicerca) || examples.includes(termineRicerca)) {\n';
            codice += '            card.style.display = "block";\n';
            codice += '        } else {\n';
            codice += '            card.style.display = "none";\n';
            codice += '        }\n';
            codice += '    }\n';
            codice += '}\n';
            codice += '<\/script>\n\n    </div>\n</body>\n</html>';
            
            mostraCodice(codice);
        }
        
        function mostraCodice(codice) {
            document.getElementById('codeDisplay').textContent = codice;
            document.getElementById('codeDisplay').style.display = 'block';
            document.getElementById('noCode').style.display = 'none';
        }
        
        function nascondiCodice() {
            document.getElementById('codeDisplay').style.display = 'none';
            document.getElementById('noCode').style.display = 'block';
        }
        
        // Event listener per la ricerca
        document.getElementById('searchInput').addEventListener('input', cercaParole);
        
        // Event listener per Enter nei campi del form
        document.getElementById('chinese').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') aggiungiParola();
        });
        
        document.getElementById('pinyin').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') aggiungiParola();
        });
        
        document.getElementById('translation').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') aggiungiParola();
        });
// Funzione copia
function copiaCodice() {
    var codice = document.getElementById("codeDisplay").textContent;
    if (!codice) {
        alert("Nessun codice da copiare.");
        return;
    }
    if (navigator.clipboard && window.isSecureContext) {
        // Con API Clipboard e contesto sicuro (https)
        navigator.clipboard.writeText(codice).then(() => {
            alert("Codice copiato!");
        }).catch(err => {
            alert("Errore nella copia: " + err);
        });
    } else {
        // Fallback per browser o contesti non sicuri: uso execCommand
        let textArea = document.createElement("textarea");
        textArea.value = codice;
        // Evita di mostrare il textarea
        textArea.style.position = "fixed";
        textArea.style.left = "-999999px";
        document.body.appendChild(textArea);
        textArea.focus();
        textArea.select();
        try {
            let successful = document.execCommand('copy');
            if (successful) {
                alert("Codice copiato!");
            } else {
                alert("Errore nella copia.");
            }
        } catch (err) {
            alert("Errore nella copia: " + err);
        }
        document.body.removeChild(textArea);
    }
}
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'99317c4a1775ed66',t:'MTc2MTIyNTE0MS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
